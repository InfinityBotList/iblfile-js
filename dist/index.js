"use strict";(()=>{function p(t,e,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function f(y){try{d(n.next(y))}catch(S){u(S)}}function h(y){try{d(n.throw(y))}catch(S){u(S)}}function d(y){y.done?s(y.value):i(y.value).then(f,h)}d((n=n.apply(t,e||[])).next())})}function V(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof V=="function"?V(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(u){return new Promise(function(f,h){u=t[s](u),i(f,h,u.done,u.value)})}}function i(s,u,f,h){Promise.resolve(h).then(function(d){s({value:d,done:f})},u)}}var c;(function(t){t.SECTOR_SIZE=512,t.OCTAL_RADIX=8,t.USTAR_TAG="ustar",t.USTAR_INDICATOR_VALUE=`${t.USTAR_TAG}\0`,t.USTAR_VERSION_VALUE="00",t.HEADER_SIZE=t.SECTOR_SIZE,t.FILE_MODE_DEFAULT=511})(c||(c={}));var a;(function(t){function e(o){return typeof o=="number"&&!Number.isNaN(o)}t.isNumber=e;function r(o){return typeof o=="string"}t.isString=r;function n(o){return r(o)&&o.length>0}t.isPopulatedString=n;function i(o){return!!(o&&o instanceof Uint8Array)}t.isUint8Array=i;function s(o){return i(o)?o.byteLength:0}t.sizeofUint8Array=s;function u(o){return n(o)?new TextEncoder().encode(o):new Uint8Array(0)}t.encodeString=u;function f(o){return i(o)?new TextDecoder().decode(o):""}t.decodeString=f;function h(o){return i(o)?o.reduce((b,A)=>b+A,0):0}t.generateChecksum=h;function d(o,b,A){return Math.max(b,Math.min(o,A))}t.clamp=d;function y(o,b){return Math.min(b,S(o))}t.advanceSectorOffset=y;function S(o){return(1+Math.floor(o/c.SECTOR_SIZE))*c.SECTOR_SIZE}t.advanceSectorOffsetUnclamped=S;function N(o){return Math.ceil(o/c.SECTOR_SIZE)*c.SECTOR_SIZE}t.roundUpSectorOffset=N;function Q(o){return N(o)-o}t.getSectorOffsetDelta=Q;function H(o){return O(o,c.OCTAL_RADIX)}t.parseIntOctal=H;function D(o){return Math.floor(O(o))*1e3}t.decodeTimestamp=D;function j(o){return Math.floor(O(o)/1e3)}t.encodeTimestamp=j;function ee(o){return D(j(o))}t.sanitizeTimestamp=ee;function te(o){return G(f(o))}t.deserializeAsciiPaddedField=te;function re(o){return D(B(o))}t.deserializeIntegerOctalTimestamp=re;function B(o){return O(f(o).trim(),c.OCTAL_RADIX)}t.deserializeIntegerOctal=B;function G(o){let A=/^([^\0]*)[\0]*$/.exec(o);return A?A[1]:o}t.removeTrailingZeros=G;function ne(o,b){return O(o).toString(c.OCTAL_RADIX).padStart(b,"0")}t.serializeIntegerOctalToString=ne;function O(o,b=10,A=0){if(e(o))return Math.floor(o);let z=parseInt(o,b);return e(z)?z:A}t.parseIntSafe=O;function ie(o,b){if(!i(b))return o;if(!i(o))return b;let A=o.byteLength,z=b.byteLength,P=new Uint8Array(A+z);return A>0&&P.set(o,0),z>0&&P.set(b,A),P}t.concatUint8Arrays=ie})(a||(a={}));function W(t,e,r,n){return p(this,void 0,void 0,function*(){if(!t||!n)return null;let i=yield t.byteLength();if(e=a.clamp(e,0,i),e>=i)return null;let s=a.clamp(r,1,c.SECTOR_SIZE)*c.SECTOR_SIZE,u=!1,f=e,h;for(;!u&&f<i;)h=yield t.read(f,s),u=n(h,f,t),f+=s;return u?{source:t,value:h,offset:f}:null})}var g;(function(t){t.UNKNOWN="UNKNOWN",t.NORMAL_FILE="0",t.NORMAL_FILE_ALT1="\0",t.NORMAL_FILE_ALT2="",t.HARD_LINK="1",t.SYMBOLIC_LINK="2",t.CHARACTER_SPECIAL="3",t.BLOCK_SPECIAL="4",t.DIRECTORY="5",t.FIFO="6",t.CONTIGUOUS_FILE="7",t.GLOBAL_EXTENDED_HEADER="g",t.LOCAL_EXTENDED_HEADER="x"})(g||(g={}));function k(t){return t===g.DIRECTORY}function K(t){switch(t){case g.NORMAL_FILE:case g.NORMAL_FILE_ALT1:case g.NORMAL_FILE_ALT2:case g.CONTIGUOUS_FILE:return!0;default:return!1}}var l;(function(t){t.ASCII="ASCII",t.ASCII_PADDED_END="ASCII_PADDED_END",t.INTEGER_OCTAL="INTEGER_OCTAL",t.INTEGER_OCTAL_TIMESTAMP="INTEGER_OCTAL_TIMESTAMP"})(l||(l={}));function oe(t,e){return Y(a.encodeTimestamp(t),e,"")}function se(t,e){return Y(t,e," ")}function Y(t,e,r){let{size:n}=e||{size:0},i=Math.max(0,n-1-r.length),s=a.serializeIntegerOctalToString(t,i)+r;return a.encodeString(s)}var X={[l.ASCII]:{serialize:a.encodeString,deserialize:a.decodeString},[l.ASCII_PADDED_END]:{serialize:a.encodeString,deserialize:a.deserializeAsciiPaddedField},[l.INTEGER_OCTAL]:{serialize:se,deserialize:a.deserializeIntegerOctal},[l.INTEGER_OCTAL_TIMESTAMP]:{serialize:oe,deserialize:a.deserializeIntegerOctalTimestamp}},m=class t{constructor(e){this.name=e.name,this.offset=e.offset,this.size=e.size,this.type=e.type,this.constantValue=e.constantValue||void 0}static frozen(e){return Object.freeze(new t(e))}sliceString(e,r){return a.decodeString(this.slice(e,r))}slice(e,r=0){if(!a.isUint8Array(e))return new Uint8Array(0);let n=r+this.offset,i=n+this.size;return e.slice(n,i)}deserialize(e){let r=X[this.type];return r&&a.isUint8Array(e)?r.deserialize(e,this):void 0}serialize(e){let r=new Uint8Array(this.size),i=X[this.type].serialize(e,this),s=a.sizeofUint8Array(i);return s>0&&s<=this.size&&r.set(i,0),r}};var E;(function(t){t.fileName=m.frozen({name:"fileName",offset:0,size:100,type:l.ASCII_PADDED_END}),t.fileMode=m.frozen({name:"fileMode",offset:100,size:8,type:l.INTEGER_OCTAL}),t.ownerUserId=m.frozen({name:"ownerUserId",offset:108,size:8,type:l.INTEGER_OCTAL}),t.groupUserId=m.frozen({name:"groupUserId",offset:116,size:8,type:l.INTEGER_OCTAL}),t.fileSize=m.frozen({name:"fileSize",offset:124,size:12,type:l.INTEGER_OCTAL}),t.lastModified=m.frozen({name:"lastModified",offset:136,size:12,type:l.INTEGER_OCTAL_TIMESTAMP}),t.headerChecksum=m.frozen({name:"headerChecksum",offset:148,size:8,type:l.INTEGER_OCTAL}),t.typeFlag=m.frozen({name:"typeFlag",offset:156,size:1,type:l.ASCII}),t.linkedFileName=m.frozen({name:"linkedFileName",offset:157,size:100,type:l.ASCII_PADDED_END}),t.ustarIndicator=m.frozen({name:"ustarIndicator",offset:257,size:6,type:l.ASCII,constantValue:c.USTAR_INDICATOR_VALUE}),t.ustarVersion=m.frozen({name:"ustarVersion",offset:263,size:2,type:l.ASCII,constantValue:c.USTAR_VERSION_VALUE}),t.ownerUserName=m.frozen({name:"ownerUserName",offset:265,size:32,type:l.ASCII_PADDED_END}),t.ownerGroupName=m.frozen({name:"ownerGroupName",offset:297,size:32,type:l.ASCII_PADDED_END}),t.deviceMajorNumber=m.frozen({name:"deviceMajorNumber",offset:329,size:8,type:l.ASCII_PADDED_END}),t.deviceMinorNumber=m.frozen({name:"deviceMinorNumber",offset:337,size:8,type:l.ASCII_PADDED_END}),t.fileNamePrefix=m.frozen({name:"fileNamePrefix",offset:345,size:155,type:l.ASCII_PADDED_END});let e={fileName:t.fileName,fileMode:t.fileMode,ownerUserId:t.ownerUserId,groupUserId:t.groupUserId,fileSize:t.fileSize,lastModified:t.lastModified,headerChecksum:t.headerChecksum,typeFlag:t.typeFlag,linkedFileName:t.linkedFileName,ustarIndicator:t.ustarIndicator,ustarVersion:t.ustarVersion,ownerUserName:t.ownerUserName,ownerGroupName:t.ownerGroupName,deviceMajorNumber:t.deviceMajorNumber,deviceMinorNumber:t.deviceMinorNumber,fileNamePrefix:t.fileNamePrefix};function r(){return Object.values(e)}t.orderedSet=r;function n(){return r().filter(s=>s!==t.headerChecksum)}t.checksumSet=n;function i(s,u){return t.ustarIndicator.sliceString(s,u).startsWith(c.USTAR_TAG)}t.isUstarSector=i})(E||(E={}));var{checksumSet:ae,headerChecksum:$,orderedSet:ue}=E,fe="".padStart($.size," "),ce=a.generateChecksum(a.encodeString(fe)),F=ue(),le=ae();function R(t){return t&&a.isNumber(t.lastModified)&&(t.lastModified=a.sanitizeTimestamp(t.lastModified)),Object.assign(J(),t||{})}function J(){return{fileName:"",fileMode:c.FILE_MODE_DEFAULT,groupUserId:0,ownerUserId:0,fileSize:0,lastModified:a.sanitizeTimestamp(Date.now()),headerChecksum:0,linkedFileName:"",typeFlag:g.NORMAL_FILE,ustarIndicator:c.USTAR_INDICATOR_VALUE,ustarVersion:c.USTAR_VERSION_VALUE,ownerUserName:"",ownerGroupName:"",deviceMajorNumber:"00",deviceMinorNumber:"00",fileNamePrefix:""}}var I=class t{constructor(e=J()){this.inflate(e)}static serialize(e){return new t(e).toUint8Array()}static deflateFrom(e,r){return t.from(e,r).deflate()}static from(e,r){let n=new t;if(a.isUint8Array(e))for(let i of F)n.setSerializedField(i,e,r);return n}setDeserializedFieldFrom(e,r){return this.setDeserializedField(e,r[e.name])}setDeserializedField(e,r){let n=e.serialize(r);return this[e.name]={field:e,bytes:n,value:r}}setSerializedField(e,r,n=0){let i=e.slice(r,n),s=e.deserialize(i);return this[e.name]={field:e,bytes:i,value:s}}update(e){let r=Object.assign(this.deflate(),e);return this.inflate(r)}inflate(e){let r=R(e),n=ce;for(let i of le){let{bytes:s}=this.setDeserializedFieldFrom(i,r);n+=a.generateChecksum(s)}return this.setDeserializedField($,n),this}deflate(){let e={};for(let r of F)e[r.name]=this[r.name].value;return R(e)}toUint8Array(){let e=new Uint8Array(c.HEADER_SIZE);for(let r of F){let{bytes:n}=this[r.name];e.set(n,r.offset)}return e}};function he(t,e){return a.concatUint8Arrays(t,e.toUint8Array())}var x=class t{constructor(e,r=null){this.header=e,this.content=r}static from(e){let{header:r,content:n}=e;return new t(r,n)}static fromMany(e){return Array.from(e).filter(r=>!!r).map(r=>t.from(r))}static combine(e){return e.reduce(he,new Uint8Array(0))}static combinePadded(e){let r=new Uint8Array(c.SECTOR_SIZE*2);return a.concatUint8Arrays(t.combine(e),r)}static combinePaddedFrom(e){let r=t.fromMany(e);return t.combinePadded(r)}toUint8Array(){let{header:e,content:r}=this,n=a.sizeofUint8Array(r),i=a.getSectorOffsetDelta(n),s=r;n>0&&i>0&&(s=a.concatUint8Arrays(r,new Uint8Array(i)));let u=R(e);u.fileSize=n;let f=I.serialize(u);return a.concatUint8Arrays(f,s)}};function de(t,e=0){return W(t,e,1,r=>E.isUstarSector(r))}function me(t,e=0){if(!a.isUint8Array(t))return-1;let n=t.byteLength,i=Math.max(0,e);for(;i<n&&!E.isUstarSector(t,i);)i=a.advanceSectorOffset(i,n);return i<n?i:-1}var _=class t{constructor(e,r,n){this.header=e,this.content=r,this.offset=n}static isTarEntryMetadata(e){return!!(e&&e instanceof t)}static from(e){if(t.isTarEntryMetadata(e))return e;let{header:r,content:n,offset:i}=e||{};r||(r=new I),n||(n=null),i||(i=0);let s=a.sizeofUint8Array(n);return r.fileSize.value!==s&&s>0&&r.update({fileSize:s}),new t(r,n,i)}static extractFrom(e,r=0){if(!a.isUint8Array(e))return null;let n=me(e,r);if(n<0)return null;let i=e.byteLength,s=I.from(e,n),u=a.advanceSectorOffset(n,i),f=s.fileSize.value,h=null;if(a.isNumber(f)&&f>0){let d=Math.min(i,u+f);h=e.slice(u,d)}return new t(s,h,n)}static extractFromAsync(e,r=0){return p(this,void 0,void 0,function*(){if(!e)return null;let n=yield de(e,r);if(!n)return null;let{value:i,offset:s}=n,u=I.from(i),f=null;return new t(u,f,s)})}};var w=class t{constructor(e){this.metadata=_.from(e)}static isTarEntry(e){return!!(e&&e instanceof t)}static from(e,r=null){let n=new I(e);return new t({header:n,content:r,offset:0})}static fromAttributes(e){let{header:r,content:n}=e;return t.from(r,n)}static tryParse(e,r){let n=_.extractFrom(e,r);return n?new t(n):null}static tryParseAsync(e,r){return p(this,void 0,void 0,function*(){let n=yield _.extractFromAsync(e,r);return n?new t(n):null})}get fileName(){return this.header.fileName.value}set fileName(e){this.header.fileName.value=e}get fileSize(){return this.header.fileSize.value}set fileSize(e){this.header.fileSize.value=e}get fileMode(){return this.header.fileMode.value}set fileMode(e){this.header.fileMode.value=e}get ownerUserId(){return this.header.ownerUserId.value}set ownerUserId(e){this.header.ownerUserId.value=e}get groupUserId(){return this.header.groupUserId.value}set groupUserId(e){this.header.groupUserId.value=e}get lastModified(){return this.header.lastModified.value}set lastModified(e){this.header.lastModified.value=e}get headerChecksum(){return this.header.headerChecksum.value}get linkedFileName(){return this.header.linkedFileName.value}set linkedFileName(e){this.header.linkedFileName.value=e}get typeFlag(){return this.header.typeFlag.value}set typeFlag(e){this.header.typeFlag.value=e}get ustarIndicator(){return this.header.ustarIndicator.value}get ustarVersion(){return this.header.ustarVersion.value}set ustarVersion(e){this.header.ustarVersion.value=e}get ownerUserName(){return this.header.ownerUserName.value}set ownerUserName(e){this.header.ownerUserName.value=e}get ownerGroupName(){return this.header.ownerGroupName.value}set ownerGroupName(e){this.header.ownerGroupName.value=e}get deviceMajorNumber(){return this.header.deviceMajorNumber.value}set deviceMajorNumber(e){this.header.deviceMajorNumber.value=e}get deviceMinorNumber(){return this.header.deviceMinorNumber.value}set deviceMinorNumber(e){this.header.deviceMinorNumber.value=e}get fileNamePrefix(){return this.header.fileNamePrefix.value}set fileNamePrefix(e){this.header.fileNamePrefix.value=e}get header(){return this.metadata.header}get content(){return this.metadata.content}get bufferStartIndex(){return this.metadata.offset}get bufferEndIndex(){return this.bufferStartIndex+this.sectorByteLength}get byteLength(){return c.HEADER_SIZE+this.fileSize}get sectorByteLength(){return a.roundUpSectorOffset(this.byteLength)}get contentStartIndex(){return c.HEADER_SIZE+this.bufferStartIndex}get contentEndIndex(){return this.contentStartIndex+this.fileSize}getContentAsText(){return a.decodeString(this.content)}isDirectory(){return k(this.typeFlag)}isFile(){return K(this.typeFlag)}readContentFrom(e,r=0,n=0){return p(this,void 0,void 0,function*(){let{contentStartIndex:i,contentEndIndex:s,fileSize:u}=this,f=a.clamp(r,0,u)+i,h=Math.max(0,s-f),d=n>0?Math.min(n,h):h;return e.read(f,d)})}toAttributes(){return new x(this.header.deflate(),this.content)}toUint8Array(){return this.toAttributes().toUint8Array()}toJSON(){let{header:e,fileName:r,fileSize:n}=this,i=this.isFile(),s=this.isDirectory();return{content:this.content?"Uint8Array["+this.content.byteLength+"]":"null",fileName:r,fileSize:n,isFile:i,isDirectory:s,header:e}}};var v=class{constructor(){this.mOffset=0,this.mSize=0}get defaultIteratorResult(){return{value:null,done:!0}}get bufferOffset(){return this.mOffset}set bufferOffset(e){this.mOffset=a.clamp(e,0,this.bufferLength)}get bufferLength(){return this.mSize}set bufferLength(e){this.mSize=Math.max(0,e)}canAdvanceOffset(){return this.bufferOffset<this.bufferLength}toJSON(){let{bufferOffset:e,bufferLength:r}=this,n=this.canAdvanceOffset();return{bufferOffset:e,bufferLength:r,canAdvanceOffset:n}}consumeIteratorResult(e){if(!e)return this.defaultIteratorResult;this.bufferOffset=e.bufferEndIndex;let r=e,n=!this.canAdvanceOffset();return{value:r,done:n}}};var U=class t extends v{constructor(){super(),this.initialize(null)}static forEachIn(e,r){var n,i,s,u;return p(this,void 0,void 0,function*(){let f=new t;yield f.initialize(e);let h=0;try{for(var d=!0,y=Z(f),S;S=yield y.next(),n=S.done,!n;){u=S.value,d=!1;try{yield r(u,h,e),h++}finally{d=!0}}}catch(N){i={error:N}}finally{try{!d&&!n&&(s=y.return)&&(yield s.call(y))}finally{if(i)throw i.error}}})}static extractAll(e){return p(this,void 0,void 0,function*(){let r=[];return yield t.forEachIn(e,n=>p(this,void 0,void 0,function*(){r.push(n)})),r})}[Symbol.asyncIterator](){return this}next(){return p(this,void 0,void 0,function*(){return this.canAdvanceOffset()?this.consumeIteratorResult(yield w.tryParseAsync(this.mData,this.bufferOffset)):this.defaultIteratorResult})}initialize(e){return p(this,void 0,void 0,function*(){e?(this.mData=e,this.bufferLength=yield this.mData.byteLength()):(this.mData=null,this.bufferLength=0),this.bufferOffset=0})}};var L=class t extends v{constructor(){super(),this.initialize(null)}static extractAll(e){let r=new t;return r.initialize(e),Array.from(r)}[Symbol.iterator](){return this}next(){return this.canAdvanceOffset()?this.consumeIteratorResult(w.tryParse(this.mData,this.bufferOffset)):this.defaultIteratorResult}initialize(e){a.isUint8Array(e)?(this.mData=e,this.bufferLength=this.mData.byteLength):(this.mData=null,this.bufferLength=0),this.bufferOffset=0}};var C=class t{constructor(){this.entries=[]}static extract(e){return L.extractAll(e)}static create(e){return x.combinePaddedFrom(e)}static extractAsync(e){return p(this,void 0,void 0,function*(){return U.extractAll(e)})}static streamAsync(e,r){return p(this,void 0,void 0,function*(){return U.forEachIn(e,r)})}toUint8Array(){let e=Array.from(this.entries).map(r=>r.toAttributes());return t.create(e)}setBuffer(e){return this.entries=t.extract(e),this}add(e){return this.entries.push(w.fromAttributes(e)),this}addTextFile(e,r,n){return this.addBinaryFile(e,a.encodeString(r),n)}addBinaryFile(e,r,n={}){return this.add({header:Object.assign({fileName:e,fileSize:r.byteLength,typeFlag:g.NORMAL_FILE},n),content:r})}addDirectory(e,r={}){return this.add({header:Object.assign({fileName:e,typeFlag:g.DIRECTORY},r)})}};var T=class{buf;constructor(e){this.buf=e}jsGetInnerArray(){return this.buf}jsConcat(e){this.buf=Uint8Array.from([...this.buf,...e])}ReadByte(){if(this.buf.length==0)return[0,new Error("EOF")];let e=this.buf[0];return this.buf=this.buf.subarray(1),[e,null]}Copy(e){return console.log("copyToBuf",e,this.buf),this.buf=Uint8Array.from([...this.buf,...e]),console.log("Array length",this.buf,this.buf.length),e.length}},M=class{r;bits=0;nBits=0;width=0;litWidth=0;clear=0;eof=0;hi=0;overflow=0;last=0;err;suffix=[];prefix=[];output=[];o=0;toRead=[];order=0;constructor(e,r,n){if(n<2||8<n)throw new Error("lzw: litWidth out of range");this.order=r,this.r=e,this.litWidth=n,this.width=1+n,this.clear=1<<n,this.eof=this.clear+1,this.hi=this.clear+1,this.overflow=1<<this.width,this.last=65535,this.suffix=Array.from({length:4096},()=>0),this.prefix=Array.from({length:4096},()=>0),this.output=Array.from({length:2*4096},()=>0)}read(){switch(this.order){case 0:return this.readLSB();case 1:return this.readMSB();default:return[0,new Error("lzw: invalid order")]}}readLSB(){for(;this.nBits<this.width;){let[r,n]=this.r.ReadByte();if(n)return[0,n];this.bits|=r<<this.nBits,this.nBits+=8}let e=this.bits&(1<<this.width)-1;return this.bits>>=this.width,this.nBits-=this.width,[e,null]}readMSB(){for(;this.nBits<this.width;){let[r,n]=this.r.ReadByte();if(n)return[0,n];this.bits|=r<<24-this.nBits,this.nBits+=8}let e=this.bits>>32-this.width;return this.bits<<=this.width,this.nBits-=this.width,[e,null]}Read(e){for(;;){if(console.log("Read",this.toRead),this.toRead.length>0){let r=e.Copy(this.toRead);return this.toRead=this.toRead.slice(r),[r,null]}if(this.err)return[0,this.err];this.decode()}}decode(){console.log("Decode");e:for(;;){let[e,r]=this.read();if(r){r.message=="EOF"&&(r=new Error("unexpected EOF")),this.err=r;break}if(e<this.clear)this.output[this.o]=e,this.o++,this.last!=65535&&(this.suffix[this.hi]=e,this.prefix[this.hi]=this.last);else if(e==this.clear){this.width=1+this.litWidth,this.hi=this.eof,this.overflow=1<<this.width,this.last=65535;continue}else if(e==this.eof){this.err=new Error("EOF");break e}else if(e<=this.hi){let[n,i]=[e,this.output.length-1];if(e==this.hi&&this.last!=65535){for(n=this.last;n>=this.clear;)n=this.prefix[n];this.output[i]=n,i--,n=this.last}for(;n>=this.clear;)this.output[i]=this.suffix[n],i--,n=this.prefix[n];this.output[i]=n;let s=this.output.slice(i);for(let u=0;u<s.length;u++)this.output[this.o+u]=s[u];this.o+=s.length,this.last!=65535&&(this.suffix[this.hi]=n,this.prefix[this.hi]=this.last)}else{this.err=new Error("lzw: invalid code");break e}if(this.last=e,this.hi++,this.hi>=this.overflow){if(this.hi>this.overflow)throw new Error("Unreachable");this.width==12?(this.last=65535,this.hi--):(this.width++,this.overflow=1<<this.width)}if(this.o>=4096)break}this.toRead=this.output.slice(0,this.o),this.o=0}close(){return this.err=new Error("lzw: reader/writer is closed"),[null]}};var q=class{sections;constructor(){this.sections={}}lzwDecompress(e){let r=new M(new T(e),0,8),n=[];for(;;){let i=new T(Uint8Array.from([])),[s,u]=r.Read(i);if(console.log("Read",s,"bytes"),n.push(i.jsGetInnerArray()),u){if(u.message=="EOF"){let f=new Uint8Array(n.reduce((d,y)=>d+y.length,0)),h=0;for(let d of n)f.set(d,h),h+=d.length;return f}throw u}}}async parseInput(e){console.log("LZW-Decompress");let r=this.lzwDecompress(e);console.log(JSON.stringify(Array.from(r)));let n={byteLength:async()=>(console.log("Get byte length",r.length),r.length),read:async(i,s)=>(console.log(`Read ${s} bytes at offset ${i}`),r.subarray(i,i+s))};console.log("Parse Tarball"),await C.streamAsync(n,async(i,s,u)=>{console.log(i)})}};})();
//# sourceMappingURL=index.js.map
